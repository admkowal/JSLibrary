"use strict";"use-strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function init(){new Map}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),Map=function(){function e(){var t=this;_classCallCheck(this,e),this.origin={lat:52.230954,lng:21.006361},this.destination={},this.mapElement=document.querySelector("#map"),this.form=document.querySelector("#mapForm"),this.findPos=document.querySelector("#findPos"),this.findRoute=document.querySelector("#findRoute"),this.createMap(),this.findPos.addEventListener("click",function(e){e.preventDefault(),t.checkGeoLoc(t.map)},!1),this.findRoute.addEventListener("click",function(o){o.preventDefault(),t.displayRoute(t.map,t.origin,e.userPos)},!1)}return _createClass(e,[{key:"displayRoute",value:function(t,o,n){function r(e,t){e.route({origin:o,destination:n,travelMode:"DRIVING"},function(e,o){"OK"===o?t.setDirections(e):window.alert("Directions request failed due to "+o)})}var i=new google.maps.DirectionsService,a=new google.maps.DirectionsRenderer;if(!e.userPos){var s=document.querySelector("#alert");s.classList.remove("hidden"),s.classList.add("alert-danger"),s.textContent="Error. First find your location."}a.setMap(t),r(i,a)}},{key:"checkGeoLoc",value:function(t){function o(e,t){var o=document.querySelector("#alert");o.classList.remove("hidden"),o.classList.remove("alert-danger"),o.classList.add(t),o.textContent=e}function n(e){var t=document.querySelector("#formOutput");t.textContent=e.lat+", "+e.lng}function r(e){var t=e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.";o(t,"alert-danger")}navigator.geolocation?navigator.geolocation.getCurrentPosition(function(r){var i={lat:r.coords.latitude,lng:r.coords.longitude};new google.maps.Marker({position:i,map:t});o("Success! Found your position.","alert-success"),n(i),t.setCenter(i),e.userPos=i},function(){r(!0)}):r(!1)}},{key:"createMap",value:function(){var e={center:this.origin,zoom:7};this.map=new google.maps.Map(this.mapElement,e);new google.maps.Marker({position:e.center,map:this.map})}}]),e}();